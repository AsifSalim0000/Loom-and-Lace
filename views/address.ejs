<%- include('include/header') -%>

<!-- navbar -->
<%- include('include/navbr') -%>

<div class="container-fluid ms-4 mt-4">
    <div class="row">
        <div class="col-md-3 account-nav rounded shadow">
            <label for="name"><%= user.name %></label>
            <hr>
            <ul>
                <li><a href="/useraccount">Profile</a></li>
                <div class="w-100 bg-secondary"><li><a href="/useraddress" class="text-white">Addresses</a></li></div>
                <li><a href="/userorders">My Orders</a></li>
                <li><a href="/forgot-otp">Forgot Password</a></li>
                <hr>
                <li class="align-bottom"><a href="/logout">Logout</a></li>
            </ul>
        </div>
        <div class="col-9 account-content  px-5">
            <div id="ad" class="rounded bg-white p-5 h-100">
                <h2>Manage Addresses</h2>
                <div class="row">
                    <div class="col-9"><a  href="/addaddress" class="btn btn-primary border rounded px-4 py-2 my-4 w-100">Add New Address</a></div>
                
                <div class="container mt-4">
                    <ul class="list-group">
                        <% addresses.forEach(address => { %>
                        <li class="list-group-item col-9">
                            <div class="row"><div class="col-10">
                            <% if(address.addressType=='work'){%>
                                <label for="work" class="bg-secondary text-white px-2 rounded">work </label>
                                <% } %>
                            </div> 
                            <div class="del col-2">
                                <ul style="list-style: none;">
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fa-solid fa-ellipsis-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                                        <li><a class="dropdown-item" href='/update-address?id=<%= address._id %>'>Edit</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item delete" data-id=<%= address._id %>>Delete</a></li>
                                        
                                    </ul>
                                </li>
                            </ul>
                           </div>
                        </div>
                            <strong><%= address.name %></strong>
                            <br>
                            <strong>Phone: <%= address.mobileNumber %></strong>
                            <br>
                            Address: <%= address.address %>, <%= address.locality %>, <%= address.district %>, <%= address.state %> - <%= address.pincode %>
                        </li>
                        <% }) %>
                    </ul>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>

<%- include('include/userFooter') -%>

<%- include('include/footer') -%>